/*-- =============================================-- Author      : Jishan Siddique-- Create date : 2020-03-29-- Description : Delete Procedure for UM_Permission-- Exec [dbo].[spr_tb_UM_Permission_Delete] @PermissionID  int    -- ============================================= */CREATE PROCEDURE [dbo].[spr_tb_UM_Permission_Delete]     @PermissionID  int    ASBEGIN    DELETE FROM [dbo].[UM_Permission]    WHERE [PermissionID] = @PermissionIDEND/*-- =============================================-- Author      : Jishan Siddique-- Create date : 2020-03-29-- Description : Select Procedure for UM_Permission-- Exec [dbo].[spr_tb_UM_Permission_Search]-- ============================================= */CREATE PROCEDURE [dbo].[spr_tb_UM_Permission_GetByID]     @PermissionID  int    ASBEGIN    SELECT [PermissionID]        ,[Name]        ,[RoleID]        ,[ParentID]        ,[IsActive]        ,[CreatedOn]        ,[CreatedBy]        ,[UpdatedOn]        ,[UpdatedBy]         FROM [dbo].[UM_Permission] WITH(NOLOCK)    WHERE [PermissionID] = @PermissionIDEND/*-- =============================================-- Author      : Jishan Siddique-- Create date : 2020-03-29-- Description : Insert Procedure for UM_Permission-- Exec [dbo].[spr_tb_UM_Permission_Insert] [Name],[RoleID],[ParentID],[IsActive],[CreatedOn],[CreatedBy],[UpdatedOn],[UpdatedBy]-- ============================================= */CREATE PROCEDURE [dbo].[spr_tb_UM_Permission_Insert]     @ResultID INT OUTPUT    ,@Name  nvarchar(250)    ,@RoleID  int    ,@ParentID  int = NULL    ,@IsActive  bit    ,@CreatedOn  datetime = NULL    ,@CreatedBy  nvarchar(50) = NULL    ,@UpdatedOn  datetime = NULL    ,@UpdatedBy  nvarchar(50) = NULL    ASBEGIN    INSERT INTO [dbo].[UM_Permission]    (          [Name]        ,[RoleID]        ,[ParentID]        ,[IsActive]        ,[CreatedOn]        ,[CreatedBy]        ,[UpdatedOn]        ,[UpdatedBy]            )    VALUES    (         @Name        ,@RoleID        ,@ParentID        ,@IsActive        ,@CreatedOn        ,@CreatedBy        ,@UpdatedOn        ,@UpdatedBy            )    SELECT @ResultID=SCOPE_IDENTITY();END/*-- =============================================-- Author      : Jishan Siddique-- Create date : 2020-03-29-- Description : Select Procedure for UM_Permission-- Exec [dbo].[spr_tb_UM_Permission_Search]-- ============================================= */CREATE PROCEDURE [dbo].[spr_tb_UM_Permission_Search]     @ResultCount INT OUTPUT    ,@Page INT = NULL    ,@PageSize INT = NULL    ,@Filter NVARCHAR(MAX) = NULL    ,@SortOrder VARCHAR(MAX) = NULLASBEGIN    DECLARE @Query NVARCHAR(MAX)=NULL, @TempQuery NVARCHAR(MAX)=NULL    DECLARE @WhereClause NVARCHAR(MAX)=NULL    IF @Filter <> ''    BEGIN        SET @TempQuery=' WHERE '+@Filter        SET @WhereClause = @TempQuery    END    IF @SortOrder <> ''    BEGIN        SET @TempQuery = CONCAT(@TempQuery,' ORDER BY '+@SortOrder)    END    ELSE    BEGIN        SET @TempQuery = CONCAT(@TempQuery,' ORDER BY 1 DESC')    END    IF NOT (@Page IS NULL OR @PageSize IS NULL)    BEGIN        DECLARE @ResultOutput TABLE (out int)        INSERT INTO @ResultOutput EXEC('SELECT COUNT(1) FROM [dbo].[UM_Permission]  (NOLOCK)  ' + @WhereClause)        SET @ResultCount = (SELECT * from @ResultOutput)    END    IF (@Page IS NOT NULL AND @PageSize IS NOT NULL)    BEGIN        SET @TempQuery = CONCAT(@TempQuery,' OFFSET ',(@PageSize * (@Page - 1)),' ROWS  FETCH NEXT ',@PageSize,' ROWS ONLY;')    END    IF @TempQuery = ''    BEGIN    SET @Query='SELECT [PermissionID]        ,[Name]        ,[RoleID]        ,[ParentID]        ,[IsActive]        ,[CreatedOn]        ,[CreatedBy]        ,[UpdatedOn]        ,[UpdatedBy]         FROM [dbo].[UM_Permission] WITH(NOLOCK)'        EXEC(@Query)    END    ELSE    BEGIN    SET @Query='SELECT [PermissionID]        ,[Name]        ,[RoleID]        ,[ParentID]        ,[IsActive]        ,[CreatedOn]        ,[CreatedBy]        ,[UpdatedOn]        ,[UpdatedBy]         FROM [dbo].[UM_Permission] WITH(NOLOCK)'        + @TempQuery        EXEC(@Query)    END    IF(1=0) BEGIN SELECT TOP 1 * FROM [dbo].[UM_Permission]  (NOLOCK)  ENDEND/*-- =============================================-- Author      : Jishan Siddique-- Create date : 2020-03-29-- Description : Update Procedure for UM_Permission-- Exec [dbo].[spr_tb_UM_Permission_Update] [Name],[RoleID],[ParentID],[IsActive],[CreatedOn],[CreatedBy],[UpdatedOn],[UpdatedBy]-- ============================================= */CREATE PROCEDURE [dbo].[spr_tb_UM_Permission_Update]     @PermissionID  int    ,@Name  nvarchar(250)    ,@RoleID  int    ,@ParentID  int = NULL    ,@IsActive  bit    ,@CreatedOn  datetime = NULL    ,@CreatedBy  nvarchar(50) = NULL    ,@UpdatedOn  datetime = NULL    ,@UpdatedBy  nvarchar(50) = NULL    ASBEGIN    UPDATE [dbo].[UM_Permission]    SET          [Name] = @Name        ,[RoleID] = @RoleID        ,[ParentID] = @ParentID        ,[IsActive] = @IsActive        ,[CreatedOn] = @CreatedOn        ,[CreatedBy] = @CreatedBy        ,[UpdatedOn] = @UpdatedOn        ,[UpdatedBy] = @UpdatedBy            WHERE [PermissionID] = @PermissionIDEND
